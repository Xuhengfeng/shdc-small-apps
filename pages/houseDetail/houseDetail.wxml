<import src="../template/template.wxml"/>

<view class="header">
  <swiper bindchange="listenSwiper" 
          indicator-dots="{{indicatorDots}}" 
          autoplay="{{autoplay}}" 
          interval="{{interval}}" 
          duration="{{duration}}">
    <block wx:for="{{houseDetail.housePicList}}">
      <swiper-item>
        <image bindtap="previewIamge" 
               src="{{item}}" 
               data-src="{{item}}" 
               class="slide-image" 
               style="width:100%!important;height:100%!important"/>
      </swiper-item>
    </block>
  </swiper>
  <view class="indicator">
    <text>{{currentIndex}}/{{houseDetail.housePicList.length}}</text>
  </view>
</view>

<view class="section1">
  <!-- 小区找房详情 -->
  <block wx:if="{{detailType==33}}">
      <text class="title">{{houseDetail.buildName}}</text>      
  </block> 

  <!-- 租房详情 -->
  <block wx:if="{{detailType==22}}">
      <text class="title" style="line-height:1.2">{{houseDetail.houseTitle}}</text>
      <view class="description1">
          {{'3453'}}<text style="font-size:26rpx;margin-left:10rpx;">元/月</text>
      </view>
  </block>
  
  <!-- 二手房(买房)详情 -->
  <block wx:if="{{detailType==11}}">
    <text class="title" style="line-height:1.2">{{houseDetail.houseTitle}}</text>
    <view class="description2">
        <text>{{houseDetail.saleTotal}}万</text>
        <text>{{houseDetail.saleprice}}元/平米</text>
    </view>
  </block>
</view>

  <!-- 小区找房 -->
  <block wx:if="{{detailType==33}}">
      <view class="estate">
            <navigator url="../index/hotHouse?title=小区二手房">
                <image src="../../images/estate1.png"></image>
                <view>二手房</view>
            </navigator>
            <navigator url="../index/buyRentHouse?title=我要租房">
                <image src="../../images/estate2.png"></image>
                <view>租房</view>
            </navigator>
      </view>
  </block>

<view class="section2">
  <view class="title">
    <text wx:if="{{detailType!==33}}">房源信息</text>
    <text wx:if="{{detailType==33}}">小区信息</text>
  </view>
  <view class="labelgroup" wx:if="{{detailType!==33}}">
      <view>朝向：<text>{{houseDetail.houseDirection}}</text></view>
      <view>大小：<text>{{houseDetail.builtArea}}m²</text></view>
      <view>户型：<text>{{houseDetail.houseType}}</text></view>
      <view>类型：<text>{{houseDetail.houseRight}}</text></view>
      <view>装修：<text>{{houseDetail.houseDecoration}}</text></view>
      <view>年代：<text>{{houseDetail.buildAge}}</text></view>
  </view>
  <view class="labelgroup" wx:if="{{detailType==33}}">
      <view>建筑年代: <text>{{houseDetail.buildAge}}</text></view>
      <view>小区类型：<text>{{houseDetail.buildType}}</text></view>
      <view>栋数：<text>{{houseDetail.totalBuildNum}}</text></view>
      <view>小区面积：<text>{{houseDetail.totalCoverArea}}</text></view>
      <view>车位数：<text>{{houseDetail.carDownNum+houseDetail.carUpNum}}</text></view>
      <view>绿化率：<text>{{houseDetail.greenRatio}}</text></view>
  </view>
</view>

<view class="section3">
  <view class="title">
    <text wx:if="{{detailType!==33}}">房源位置</text>
    <text wx:if="{{detailType==33}}">小区位置</text>
  </view>
  <view class="map">
        <!-- 腾讯地图 -->
        <map id="map" longitude="{{longitude}}" latitude="{{latitude}}" scale="14" controls="{{controls}}" bindcontroltap="controltap" markers="{{markers}}" bindmarkertap="markertap" polyline="{{polyline}}" bindregionchange="regionchange" show-location style="width: 100%; height: 100%;"></map>

      <!-- 静态地图 -->
      <image src="{{src}}" style="width:100%;background-size:cover" wx:if="{{!hiddenModal}}"></image> 
  </view>
</view>

<view class="section4">
  <navigator url="houseDetailInfo?content={{houseDetail.buildSynop}}&title={{houseDetail.houseTitle}}" wx:if="{{detailType!==33}}">
    <view class="weui-cell weui-cell_access" hover-class="weui-cell_active">
        <view class="weui-cell__bd">房屋简介</view>
        <view class="weui-cell__ft weui-cell__ft_in-access"></view>
    </view>
    <view class="content">
        {{houseDetail.buildSynop}}
    </view>
  </navigator>
  <block wx:if="{{detailType==33}}">
       <!-- 小区找房详情 -->
      <view class="title">
          <text>周边设施</text>      
      </view>
      <view class="facilityLabel">
          <view>交通: <text>{{houseDetail.transportInfo}}</text></view>
          <view>学校: <text>{{houseDetail.schoolInfo}}</text></view>
          <view>医院: <text>{{houseDetail.hospitalInfo}}</text></view>
          <view>银行: <text>{{houseDetail.bankInfo}}</text></view>
          <view>超市: <text>{{houseDetail.supermarketInfo}}</text></view> 
      </view>  
  </block>
</view>


<view class="section5" wx:if="{{detailType!==33}}">
  <view class="title"><text>关联小区</text></view>
  <navigator url="">
      <view class="item">
          <view class="image">
            <image src="{{guanlianList.housePic?guanlianList.housePic:'../../images/astate.png'}}"></image>
          </view>
          <view>
            <!-- 二手房 小区 -->
            <template is="houseContent1" data="{{guanlianList}}" wx:if="{{detailType==11||detailType==33}}"/>
            <!-- 租房 -->
            <template is="houseContent2" data="{{guanlianList}}" wx:if="{{detailType==22}}"/>
          </view>
      </view>
  </navigator>
</view>

<view class="section6" wx:if="{{detailType!==33}}">
  <view class="title"><text>附近房源</text></view>
  <block wx:for="{{nearbyHouse}}">
      <view class="item" style="position:relative;">
          <view class="image">
            <image src="{{item.housePic?item.housePic:'../../images/astate.png'}}"></image>
          </view>
          <view>
            <!-- 二手房(买房)、租房详情 -->
            <template is="houseContent2" data="{{item}}"/>
          </view>
          <view bindtap="RefreshHouseDetail" 
                data-id="{{item.sdid}}"
                style="position:absolute;top:0;left:0;width:100%;height:100%;background:transparent;">
          </view>
      </view>
  </block>
</view>


<view class="footer-placeholder" wx:if="{{detailType!==33}}">
  <!--填充盒补齐底部高度-->
</view>

<!-- cover-view 写法 -->
<cover-view class="footer" wx:if="{{detailType!==33}}">
  <cover-view class="collectionLike" bindtap="toggleSelectLike">
    <cover-view class="like">
      <cover-image src="../../images/like-off.png" wx:if="{{likeFlag}}"/>
      <cover-image src="../../images/like-on.png" wx:if="{{!likeFlag}}"/>
       <cover-view class="attention">收藏</cover-view> 
    </cover-view>
  </cover-view>
  <cover-view class="type1" wx:if="{{true}}">
    <cover-view bindtap="jumpLookHouse">预约看房</cover-view>
    <cover-view bindtap="listenerButton">联系经纪人</cover-view>
  </cover-view>
  <cover-view class="type2" wx:if="{{false}}">
    <cover-view bindtap="listenerButton">联系经纪人</cover-view>
  </cover-view>
</cover-view> 
 <template is="shadowLay" data="{{hiddenModal,listenerButton,houseDetail}}"/> 


<!-- 小区详情 -->
<view class="section66" wx:if="{{detailType==33}}">
  <view class="guess-like">
    <view style="float:left;margin:60rpx 0 40rpx;font-size:40rpx;line-height:1;font-weight:normal;">
      <text style="color:#f00;margin-right:10rpx;font-weight:normal;">|</text>猜你喜欢
    </view>
    <view class="twoselect">
      <text style="font-weight:normal;font-size:30rpx;margin-right:24rpx" 
            wx:for="{{guessYouLike}}" 
            wx:key="key" 
            data-index="{{index}}" 
            bindtap="selectYouLike" 
            class="{{index == num?'red':''}}">{{item}}</text>
    </view>
  </view>

  <!-- twohandhouse -->
  <block wx:for="{{guessYoulikeHouse}}" wx:key="index" wx:for-item="item">
      <view class="item">
            <view class="image">
              <image src="{{item.housePic?item.housePic: '../../images/astate.png'}}"></image></view>
            <view class="item-content">
              <view class="item-title">{{item.houseTitle}}</view>
              <view style="font-size:26rpx;color:#666666;margin-top:20rpx;line-height:1;">
                {{item.areaName}} {{item.districtName}} {{item.houseDirection}}
              </view>

              <view style="font-size:26rpx;color:#666666;margin-top:10rpx;line-height:1;">
                <text style="margin-right:20rpx">{{item.houseType}}</text>
                <text>{{item.builtArea}}m²</text>
              </view>

              <view class="houseTag" style="font-size:26rpx;color:#666666;margin-top:10rpx;white-space:nowrap">
                <text wx:for="{{item.houseTag}}" 
                      wx:key="{{index2}}"
                      wx:for-item="item2" 
                      wx:for-index="index2" 
                      style="margin-right:20rpx;padding:5rpx 10rpx;color:#fff;">{{item2}}</text>
              </view>

            <view wx:if="{{flagPrice}}" style="font-size:34rpx;color:#ff4343;margin-top:20rpx;line-height:1;">
                {{item.saleTotal}}万<text style="font-size:24rpx;color:#666666;margin-left:25rpx;">{{item.salePrice}}元/平米</text>
            </view>
            <view wx:if="{{!flagPrice}}" style="font-size:34rpx;color:#ff4343;margin-top:20rpx;line-height:1;">
                {{item.rentPrice}}<text style="font-size:24rpx;color:#666666;margin-left:10rpx">元/月</text>
            </view>
          </view>
      </view>
  </block>
  <view class="tips">
      <view wx:if="{{hasMore}}"><image src="../../images/loading.gif" mode="aspectFill"/><text>玩了命的加载中...</text></view>
      <view wx:elif="{{twohandhouse.length==0}}"><text>没有更多内容</text></view>
      <navigator wx:elif="{{twohandhouse.length!=0}}" url="../searchList/searchList?houseType={{houseType[num]}}">查看全部房源</navigator> 
  </view>
  <loading wx:if="{{showload}}">
    加载中...
  </loading>
</view>
<import src="../template/template.wxml"/>
<view class="header">
  <view class="list-search">
    <view class='list-search-box'><icon type="search" bindtap="startsearch" size="15"/>
      <input placeholder="输入您要搜索的城市" 
             bindconfirm="searchSubmit"
             bindinput="userSearch"
             value="{{keyword}}"/>
    </view>
     <!-- <button class="search-button" catchtap="searchMt">搜索</button>  -->
  </view>  
  <navBar-html label="{{label}}"
               area="{{area}}" 
               houseType="{{houseType}}"
               mode="{{mode}}"
               price="{{price}}"
               proportion="{{proportion}}"
               bind:myevent="onMyEventHouseList"
               keyword="{{keyword}}"
               id="navbar">
  </navBar-html>
</view>

<!--这是填充空盒子-->
<view style="height:160rpx"></view>

<!--房源列表-->
<block wx:for="{{houseList}}">
    <navigator url="../houseDetail/houseDetail?id={{item.sdid}}&houseDetail={{houseDetail}}">
        <view class="item" style="background:#ffffff;">
            <view class="image">
              <image src="{{item.housePic?item.housePic:'../../images/banner.png'}}"/>
            </view>
            <!-- 小区 -->
            <view wx:if="{{!flagTwoHouse}}">
                <view style="font-size:36rpx;color:#333333;line-height:1">{{item.buildName}}</view>
                <view style="font-size:26rpx;color:#666666;margin-top:20rpx;line-height:1">
                  <text style="margin-right:10rpx">{{item.areaName}}</text>
                  <text style="margin-right:10rpx">{{item.districtName}}</text>
                  <text style="margin-right:10rpx">{{item.buildAge}}建成</text>
                  <text style="margin-right:10rpx;line-height:1.6">{{item.buildType}}</text>
                </view>
                <view style="font-size:26rpx;color:#666666;margin-top:20rpx;line-height:1">
                  <text>在售{{item.saleCount}}套</text><text style="margin: 0 10rpx;">/</text><text>在租{{item.rentCount}}套</text>
                </view>
                <view style="font-size:34rpx;color:#ff4343;margin-top:20rpx;line-height:1;">
                    {{item.avgSalePrice}}<text style="font-size:22rpx;color:#666666;margin-left:10rpx">元/平米</text>
                </view>
            </view>

            <!-- 二手房 租房 -->
            <view wx:if="{{flagTwoHouse}}">
                <view class="item-title">{{item.houseTitle}}</view>
                <view style="font-size:26rpx;color:#666666;margin-top:20rpx;line-height:1;">
                    <text>{{item.areaName}} {{item.districtName}} {{item.houseDirection}}</text>
                </view>

                <view style="font-size:26rpx;color:#666666;margin-top:10rpx;line-height:1;">
                    <text style="margin-right:20rpx">{{item.houseType}}</text>
                    <text>{{item.builtArea}}m²</text>
                </view>

                <view class="houseTag" 
                      style="font-size:26rpx;color:#666666;margin-top:10rpx;white-space:nowrap">
                      <text wx:for="{{item.houseTag}}" 
                          wx:key="{{index2}}"
                          wx:for-item="item2" 
                          wx:for-index="index2" 
                          style="margin-right:20rpx;padding:5rpx 10rpx;color:#fff;">{{item2}}</text>
                </view>

                <view wx:if="{{flagPrice}}" style="margin-top:20rpx;line-height:1;">
                    <text style="font-size:34rpx;color:#ff4343;margin-right:25rpx">{{item.saleTotal}}万</text>
                    <text style="font-size:24rpx;color:#666666">{{item.salePrice}}元/平米</text>
                </view>
                <view wx:if="{{!flagPrice}}" style="margin-top:20rpx;line-height:1;">
                    <text style="font-size:34rpx;color:#ff4343;margin-right:10rpx">{{item.rentPrice}}</text>
                    <text style="font-size:24rpx;color:#666666">元/月</text>
                </view>
            </view>
        </view>
    </navigator>
</block>
<view class="tips">
    <view wx:if="{{hasMore}}"><image src="../../images/loading.gif" mode="aspectFill"/><text>玩了命的加载中...</text></view>
    <view wx:else><text>没有更多内容</text></view>
</view> 
<loading wx:if="{{showload}}">加载中...</loading>
